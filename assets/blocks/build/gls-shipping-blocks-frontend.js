(()=>{"use strict";const e=window.React,t=window.wp.i18n,n=window.wp.element,o=window.wc?.blocksCheckout?.registerCheckoutFilters,c=({shippingMethod:o,extensions:c})=>{const[s,l]=(0,n.useState)(null),r=window.glsShipping?.gls_methods||[],i=window.glsShipping?.translations||{};if(!r.includes(o.method_id))return null;(0,n.useEffect)(()=>{const e=document.getElementsByClassName("inchoo-gls-map"),t=e=>{const t=e.detail;l(t);const n=document.getElementById("contact-gls-shipping-pickup-info");if(n){const e=JSON.stringify(t);Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(n,e);const o=new Event("input",{bubbles:!0});n.dispatchEvent(o)}};if(e.length>0)for(let n=0;n<e.length;n++)e[n].addEventListener("change",t);return()=>{if(e.length>0)for(let n=0;n<e.length;n++)e[n].removeEventListener("change",t)}},[__internalSetExtensionData]);const p=o.method_id.includes("locker")?i.select_parcel_locker||(0,t.__)("Select Parcel Locker","gls-shipping-for-woocommerce"):i.select_parcel_shop||(0,t.__)("Select Parcel Shop","gls-shipping-for-woocommerce");return(0,e.createElement)("div",{className:"gls-map-button-container",style:{marginTop:"10px"}},(0,e.createElement)("button",{type:"button",className:"wp-element-button gls-map-button",onClick:()=>{const e=document.getElementById("shipping-country")||document.querySelector('select[name*="shipping_country"]')||document.querySelector('input[name*="shipping_country"]'),t=document.getElementById("billing_country")||document.querySelector('select[name*="billing_country"]')||document.querySelector('input[name*="billing_country"]'),n=(e?.value||t?.value||"hr").toLowerCase();let c;if(o.method_id.includes("locker")?c="gls-map-locker":o.method_id.includes("shop")&&(c="gls-map-shop"),c){const e=document.querySelector(`.${c}`);e&&(e.setAttribute("country",n.toLowerCase()),e.showModal())}},style:{backgroundColor:"#0073aa",color:"white",border:"none",padding:"8px 16px",borderRadius:"3px",cursor:"pointer"}},p),s&&(0,e.createElement)("div",{className:"gls-pickup-info",style:{border:"1px solid #ddd",padding:"10px",marginTop:"10px",backgroundColor:"#f9f9f9",borderRadius:"3px"}},(0,e.createElement)("strong",null,i.pickup_location||(0,t.__)("Pickup Location:","gls-shipping-for-woocommerce")),(0,e.createElement)("br",null),(0,e.createElement)("strong",null,i.name||(0,t.__)("Name","gls-shipping-for-woocommerce"),":")," ",s.name,(0,e.createElement)("br",null),(0,e.createElement)("strong",null,i.address||(0,t.__)("Address","gls-shipping-for-woocommerce"),":")," ",s.contact.address,", ",s.contact.city,", ",s.contact.postalCode,(0,e.createElement)("br",null),(0,e.createElement)("strong",null,i.country||(0,t.__)("Country","gls-shipping-for-woocommerce"),":")," ",s.contact.countryCode))};function s(e){const t=e.detail;let n=document.getElementById("gls-pickup-info-blocks");if(!n){n=document.createElement("div"),n.id="gls-pickup-info-blocks",n.style.cssText="\n            border: 1px solid #ddd;\n            padding: 15px;\n            margin: 15px 0;\n            background-color: #f9f9f9;\n            border-radius: 4px;\n            font-size: 14px;\n            line-height: 1.4;\n        ";const e=document.querySelector(".wc-block-components-shipping-rates-control");e&&e.parentNode.insertBefore(n,e.nextSibling)}const o=window.glsShipping?.translations||{};n.innerHTML=`\n        <strong>${o.pickup_location||"Pickup Location:"}:</strong><br>\n        <strong>${o.name||"Name"}:</strong> ${t.name}<br>\n        <strong>${o.address||"Address"}:</strong> ${t.contact.address}, ${t.contact.city}, ${t.contact.postalCode}<br>\n        <strong>${o.country||"Country"}:</strong> ${t.contact.countryCode}\n    `,n.style.display="block";const c=document.getElementById("contact-gls-shipping-pickup-info");if(c){const e=JSON.stringify(t);Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(c,e);const n=new Event("input",{bubbles:!0});c.dispatchEvent(n)}}function l(e){const t=document.createElement("button");t.type="button",t.className="gls-map-button",t.style.cssText="display: block; margin-top: 8px; background: #0073aa; color: white; border: none; padding: 8px 16px; border-radius: 3px; cursor: pointer; font-size: 14px; width: auto;";const n=window.glsShipping?.translations||{};return e.includes("locker")?t.textContent=n.select_parcel_locker||"Select Parcel Locker":t.textContent=n.select_parcel_shop||"Select Parcel Shop",t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const n=document.getElementById("shipping-country")||document.querySelector('select[name*="shipping_country"]')||document.querySelector('input[name*="shipping_country"]'),o=document.getElementById("billing_country")||document.querySelector('select[name*="billing_country"]')||document.querySelector('input[name*="billing_country"]'),c=(n?.value||o?.value||"hr").toLowerCase();let s;if(e.includes("locker")?s="gls-map-locker":e.includes("shop")&&(s="gls-map-shop"),s){const e=document.querySelector(`.${s}`);e&&(e.setAttribute("country",c.toLowerCase()),e.showModal())}}),t}o&&["shippingMethodLabel","shippingMethodName","shippingRateLabel","shippingOptionLabel"].forEach(t=>{o(`gls-${t}`,{[t]:(t,n,o)=>{const{shippingMethod:s}=o||{};return s&&window.glsShipping?.gls_methods?.includes(s.method_id)?(0,e.createElement)("div",null,t,(0,e.createElement)(c,{shippingMethod:s,extensions:n})):t}})}),setTimeout(()=>{!function(){const e=document.getElementsByClassName("inchoo-gls-map");if(e.length>0)for(var t=0;t<e.length;t++)e[t].removeEventListener("change",s),e[t].addEventListener("change",s)}(),document.addEventListener("change",e=>{e.target.matches('input[name*="radio-control"]')&&"radio"===e.target.type&&(["gls_shipping_method_parcel_locker","gls_shipping_method_parcel_shop","gls_shipping_method_parcel_locker_zones","gls_shipping_method_parcel_shop_zones"].some(t=>e.target.value.includes(t))||function(){const e=document.getElementById("gls-pickup-info-blocks");e&&(e.innerHTML="",e.style.display="none");try{const e=document.getElementById("contact-gls-shipping-pickup-info");if(e){Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set.call(e,"");const t=new Event("input",{bubbles:!0});e.dispatchEvent(t);const n=new Event("change",{bubbles:!0});e.dispatchEvent(n)}}catch(e){}}())}),document.addEventListener("change",e=>{if(e.target.matches('input[name*="radio-control"]')&&"radio"===e.target.type){const t=e.target.value,n=["gls_shipping_method_parcel_locker","gls_shipping_method_parcel_shop","gls_shipping_method_parcel_locker_zones","gls_shipping_method_parcel_shop_zones"].some(e=>t.includes(e));document.querySelectorAll(".gls-map-button").forEach(e=>e.remove()),n&&setTimeout(()=>{const e=document.querySelector(`input[value="${t}"]`)?.closest(".wc-block-components-radio-control__option");if(e&&!e.querySelector(".gls-map-button")){const n=e.querySelector(".wc-block-components-radio-control__option-layout");if(n){const e=l(t);n.insertAdjacentElement("afterend",e)}}},100)}}),function(){const e=document.querySelector('input[name*="radio-control"]:checked');if(e){const t=e.value;if(["gls_shipping_method_parcel_locker","gls_shipping_method_parcel_shop","gls_shipping_method_parcel_locker_zones","gls_shipping_method_parcel_shop_zones"].some(e=>t.includes(e))){const n=e.closest(".wc-block-components-radio-control__option");if(n&&!n.querySelector(".gls-map-button")){const e=n.querySelector(".wc-block-components-radio-control__option-layout");if(e){const n=l(t);e.insertAdjacentElement("afterend",n)}}}}}()},1500)})();